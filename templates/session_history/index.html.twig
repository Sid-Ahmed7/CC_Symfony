{% extends 'base.html.twig' %}

{% block content %}
    <div class="container mx-auto px-4 my-6">
        <h1 class="text-center text-3xl font-semibold text-gray-800 mb-6">Suivi des Séances</h1>

        <a href="{{ path('app_session_history_new') }}" class="btn bg-green-500 text-white px-4 py-2 rounded-lg mb-6 inline-block hover:bg-green-600 transition duration-300">
            Ajouter un nouvelle objectif
        </a>

        {% if session_histories is empty %}
            <div class="alert alert-info bg-blue-100 text-blue-800 p-4 rounded-lg">
                Aucune séance enregistrée pour cet utilisateur.
            </div>
        {% else %}
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
                {% for sessionH in session_histories %}
                    <div class="card bg-white shadow-lg rounded-lg p-4 border-l-4 border-blue-500">
                        <h5 class="text-xl font-bold text-gray-800">{{ sessionH.session.title }}</h5>
                        <p class="text-gray-600 mt-2">
                            <strong>Date: </strong> <span class="text-gray-500">{{ sessionH.sessionDate|date('Y-m-d') }}</span><br>
                            <strong>Objectifs: </strong> 
                            <span class="text-gray-500">
                                {% if sessionH.goals|length > 100 %}
                                    {{ sessionH.goals|slice(0, 100) }}...
                                {% else %}
                                    {{ sessionH.goals }}
                                {% endif %}
                            </span><br>
                            <strong>Commentaires: </strong> 
                            <span class="text-gray-500">
                                {% if sessionH.comments|length > 100 %}
                                    {{ sessionH.comments|slice(0, 100) }}...
                                {% else %}
                                    {{ sessionH.comments }}
                                {% endif %}
                            </span><br>
                            <strong>Status: </strong> 
                            {% if sessionH.isCancelled %}
                                <span class="bg-red-500 text-white px-2 py-1 rounded-full text-xs">Annulée</span>
                            {% else %}
                                <span class="bg-green-500 text-white px-2 py-1 rounded-full text-xs">Active</span>
                            {% endif %}
                        </p>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    </div>
{% endblock %}
